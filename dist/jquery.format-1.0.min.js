/* * jQuery Format Plugin v1.0 * http://www.asual.com/jquery/format/ * * Copyright (c) 2009 Rostislav Hristov * Dual licensed under the MIT and GPL licenses. * http://docs.jquery.com/License * * Date: 2009-10-06 00:56:01 +0300 (Tue, 06 Oct 2009) */(function(a){a.format=(function(){var d="undefined",c=true,e=false,b={dates:{format:"MMM dd, yyyy KK:mm a",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],timeFormat:"HH:mm",shortDateFormat:"dd.MM.yyyy",longDateFormat:"EEEE, d. MMMM yyyy"},numbers:{format:"#,##0.0#",groupingSeparator:",",decimalSeparator:"."}};return{date:function(G,N){if(typeof G=="string"){var U=function(E,y,s,m){for(var i=m;i>=s;i--){var j=E.substring(y,y+i);if(j.length>=s&&(new RegExp(/^\d+$/)).test(j)){return j}}return null};if(typeof N==d){N=b.dates.format}var p=false;var K=0;var k=0;var Q="";var l="";var u,t;var f=new Date();var z=f.getYear();var T=f.getMonth()+1;var R=1;var g=f.getHours();var O=f.getMinutes();var I=f.getSeconds();var r=f.getMilliseconds();var C="";while(K<N.length){l="";Q=N.charAt(K);while((N.charAt(K)==Q)&&(K<N.length)){l+=N.charAt(K++)}if(l.indexOf("MMMM")>-1&&l.length>4){l="MMMM"}if(l.indexOf("EEEE")>-1&&l.length>4){l="EEEE"}if(l=="yyyy"||l=="yy"||l=="y"){if(l=="yyyy"){u=4;t=4}if(l=="yy"){u=2;t=2}if(l=="y"){u=2;t=4}z=U(G,k,u,t);if(z==null){return 0}k+=z.length;if(z.length==2){z=parseInt(z);if(z>70){z=1900+z}else{z=2000+z}}}else{if(l=="MMMM"){T=0;for(var J=0,q;q=b.dates.monthsFull[J];J++){if(G.substring(k,k+q.length).toLowerCase()==q.toLowerCase()){T=J+1;k+=q.length;break}}if((T<1)||(T>12)){return 0}}else{if(l=="MMM"){T=0;for(var J=0,q;q=b.dates.monthsShort[J];J++){if(G.substring(k,k+q.length).toLowerCase()==q.toLowerCase()){T=J+1;k+=q.length;break}}if((T<1)||(T>12)){return 0}}else{if(l=="EEEE"){for(var J=0,L;L=b.dates.daysFull[J];J++){if(G.substring(k,k+L.length).toLowerCase()==L.toLowerCase()){k+=L.length;break}}}else{if(l=="EEE"){for(var J=0,L;L=b.dates.daysShort[J];J++){if(G.substring(k,k+L.length).toLowerCase()==L.toLowerCase()){k+=L.length;break}}}else{if(l=="MM"||l=="M"){T=U(G,k,p?l.length:1,2);if(T==null||(T<1)||(T>12)){return 0}k+=T.length}else{if(l=="dd"||l=="d"){R=U(G,k,p?l.length:1,2);if(R==null||(R<1)||(R>31)){return 0}k+=R.length}else{if(l=="hh"||l=="h"){g=U(G,k,p?l.length:1,2);if(g==null||(g<1)||(g>12)){return 0}k+=g.length}else{if(l=="HH"||l=="H"){g=U(G,k,p?l.length:1,2);if(g==null||(g<0)||(g>23)){return 0}k+=g.length}else{if(l=="KK"||l=="K"){g=U(G,k,p?l.length:1,2);if(g==null||(g<0)||(g>11)){return 0}k+=g.length}else{if(l=="kk"||l=="k"){g=U(G,k,p?l.length:1,2);if(g==null||(g<1)||(g>24)){return 0}k+=g.length;g--}else{if(l=="mm"||l=="m"){O=U(G,k,p?l.length:1,2);if(O==null||(O<0)||(O>59)){return 0}k+=O.length}else{if(l=="ss"||l=="s"){I=U(G,k,p?l.length:1,2);if(I==null||(I<0)||(I>59)){return 0}k+=I.length}else{if(l=="SSS"||l=="SS"||l=="S"){r=U(G,k,p?l.length:1,3);if(r==null||(r<0)||(r>999)){return 0}k+=r.length}else{if(l=="a"){var D=G.substring(k,k+2).toLowerCase();if(D=="am"){C="AM"}else{if(D=="pm"){C="PM"}else{return 0}}k+=2}else{if(l!=G.substring(k,k+l.length)){return 0}else{k+=l.length}}}}}}}}}}}}}}}}}if(k!=G.length){return 0}if(T==2){if(((z%4==0)&&(z%100!=0))||(z%400==0)){if(R>29){return 0}}else{if(R>28){return 0}}}if((T==4)||(T==6)||(T==9)||(T==11)){if(R>30){return 0}}if(g<12&&C=="PM"){g=g-0+12}else{if(g>11&&C=="AM"){g-=12}}return(new Date(z,T-1,R,g,O,I,r))}else{var o=function(j,i){if(typeof i=="undefined"||i==2){return(j>=0&&j<10?"0":"")+j}else{if(j>=0&&j<10){return"00"+j}if(j>=10&&j<100){return"0"+j}return j}};if(typeof N==d){N=b.dates.format}var t=G.getYear();if(t<1000){t=String(t+1900)}var n=G.getMonth()+1;var P=G.getDate();var A=G.getDay();var w=G.getHours();var F=G.getMinutes();var B=G.getSeconds();var h=G.getMilliseconds();var G=new Object();G.y=t;G.yyyy=t;G.yy=String(t).substring(2,4);G.M=n;G.MM=o(n);G.MMM=b.dates.monthsShort[n-1];G.MMMM=b.dates.monthsFull[n-1];G.d=P;G.dd=o(P);G.EEE=b.dates.daysShort[A];G.EEEE=b.dates.daysFull[A];G.H=w;G.HH=o(w);if(w==0){G.h=12}else{if(w>12){G.h=w-12}else{G.h=w}}G.hh=o(G.h);G.k=w+1;G.kk=o(G.k);if(w>11){G.K=w-12}else{G.K=w}G.KK=o(G.K);if(w>11){G.a="PM"}else{G.a="AM"}G.m=F;G.mm=o(F);G.s=B;G.ss=o(B);G.S=h;G.SS=o(h);G.SSS=o(h,3);var K=0;var Q="";var l="";var v="";while(K<N.length){l="";Q=N.charAt(K);while(N.charAt(K)==Q){l+=N.charAt(K++)}if(l.indexOf("MMMM")>-1&&l.length>4){l="MMMM"}if(l.indexOf("EEEE")>-1&&l.length>4){l="EEEE"}if(G[l]!=null){v=v+G[l]}else{v=v+l}}return v}},number:function(t,x){if(typeof t=="string"){var p=b.numbers.groupingSeparator;var j=b.numbers.decimalSeparator;var g=t.indexOf(j);var f=1;if(g!=-1){f=Math.pow(10,t.length-g-1)}t=t.replace(new RegExp("["+p+"]","g"),"");t=t.replace(new RegExp("["+j+"]"),".");return(parseInt(t*f))/f}else{if(typeof x==d||x.length<1){x=b.numbers.format}var y="";var m="";var p=",";var z=x.lastIndexOf(p);var j=".";var g=x.indexOf(j);if(g!=-1){var m=b.numbers.decimalSeparator;var r=x.substr(g+1).replace(/#/g,"").length;var q=x.substr(g+1).length;if(q>0){var B=Math.pow(10,q);var f=1000;var h=String(Math.round(parseInt(t*B*f-parseInt(t)*B*f)/f));var s=t.toString().split(".");if(typeof s[1]!=d){for(var w=0;w<s[1].length;w++){if(s[1].substr(w,1)=="0"){h="0"+h}else{break}}}for(var w=0;w<(q-m.length);w++){h+="0"}var u,v="";for(var w=0;w<h.length;w++){u=h.substr(w,1);if(w>=r&&u=="0"){break}v+=u}m+=v}if(m==b.numbers.decimalSeparator){m=""}}if(g!=0){if(m!=""){y=String(Math.floor(t))}else{y=String(Math.round(t))}var A=b.numbers.groupingSeparator;var l=0;if(z!=-1){if(g!=-1){l=g-z}else{l=x.length-z}l--}if(l>0){var n=0,o="";var w=y.length;while(w--){if(n!=0&&n%l==0){o=A+o}o=y.substr(w,1)+o;n++}y=o}var C;if(g!=-1){C=x.substr(0,g).replace(new RegExp("#|"+A,"g"),"").length}else{C=x.replace(new RegExp("#|"+A,"g"),"").length}var k=y.length;for(var w=k;w<C;w++){y="0"+y}}result=y+m;return result}}}})()}(jQuery));